set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

TMUX_STATUS_BG="#2c323c"
TMUX_STATUS_LEFT_FG="#282c34"
TMUX_STATUS_LEFT_BG="#98c379"
TMUX_STATUS_RIGHT_FG="#abb2bf"
TMUX_STATUS_RIGHT_BG="#2c323c"
TMUX_WINDOW_FG="#abb2bf"
TMUX_WINDOW_BG="#2c323c"
TMUX_CURRENT_WINDOW_FG="#98c379"
TMUX_CURRENT_WINDOW_BG="#2c323c"
TMUX_ACTIVE_WINDOW_FG="#61afef"
TMUX_ACTIVE_WINDOW_BG="#2c323c"
TMUX_PANE_ACTIVE_BORDER_FG="colour231"
TMUX_PANE_BORDER_FG="colour231"
TMUX_MESSAGE_COMMAND_FG="colour231"
TMUX_MESSAGE_COMMAND_BG="colour231"
TMUX_MESSAGE_FG="#abb2bf"
TMUX_MESSAGE_BG="#2c323c"

set-option -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc,rxvt-unicode-256color:Tc"

# address vim mode switching delay (http://superuser.com/a/252717/65504)
set -s escape-time 0

set-option -g renumber-windows on

# Set tmux to Vi mode
set-window-option -g mode-keys vi

# vim commands for tmux command mode
set -g status-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'V' send -X select-line
bind-key -T copy-mode-vi 'r' send -X rectangle-toggle
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Remap prefix from 'C-b' to 'C-s'
set -g prefix C-s
bind C-s send-prefix
unbind C-b

# split panes using | and \ 
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# map Vi movement keys as pane movement 
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# make paste work macOS
set-option -g default-command "reattach-to-user-namespace -l $SHELL"

# increase scrollback buffer size
set -g history-limit 50000

# refresh 'status-left' and 'status-right' more often
set -g status-interval 5

# super useful when using "grouped sessions" and multi-monitor setup
setw -g aggressive-resize on

# Status bar
set -g status "on"
set -g status-attr "none"
set -g status-justify "left"

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Status left
set -g status-left " $USER "
set -g status-left-attr bold
set -g status-left-length "100"
set -g status-left-bg $TMUX_STATUS_LEFT_BG
set -g status-left-fg $TMUX_STATUS_LEFT_FG

# Status right
set -g status-right " ï€—  %b %d %Y | %l:%M %p  #(.tmux/battery.sh) "
set -g status-right-attr none
set -g status-right-length "100"
set -g status-right-bg $TMUX_STATUS_RIGHT_BG
set -g status-right-fg $TMUX_STATUS_RIGHT_FG

# Window
setw -g window-status-attr "none"
setw -g window-status-separator ""

# Current window
set-option -gw window-status-current-attr bold

# Alerted window
setw -g window-status-activity-attr bold
setw -g monitor-activity on
set -g visual-activity off
set-option -g bell-action none

## panes
set -g pane-active-border-fg $TMUX_PANE_ACTIVE_BORDER_FG
set -g pane-border-fg $TMUX_PANE_BORDER_FG

## command bar
set -g message-command-fg $TMUX_MESSAGE_COMMAND_FG
set -g message-command-bg $TMUX_MESSAGE_COMMAND_BG
set -g message-fg $TMUX_MESSAGE_FG
set -g message-bg $TMUX_MESSAGE_BG

## window status
set -g status-bg $TMUX_STATUS_BG
set-window-option -g window-status-format " #I. #W "
set-window-option -g window-status-current-format " #I. #W "
setw -g window-status-current-style fg=${TMUX_CURRENT_WINDOW_FG},bg=${TMUX_CURRENT_WINDOW_BG}
setw -g window-status-style fg=${TMUX_WINDOW_FG},bg=${TMUX_WINDOW_BG}
setw -g window-status-activity-style fg=${TMUX_ACTIVE_WINDOW_FG},bg=${TMUX_ACTIVE_WINDOW_BG}

# reload config file
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

run '~/.tmux/plugins/tpm/tpm'
